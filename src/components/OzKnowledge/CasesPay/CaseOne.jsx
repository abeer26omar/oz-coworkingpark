import React, { useState, useEffect } from "react";
import Paragraph from "../../UI/Paragraph";
import Calunder from "../../UI/Icons/Calunder";
import Alarm from "../../UI/Icons/Alarm";
import Advanced from "../../UI/Icons/Advanced";
import Payment from "../../UI/Icons/Payment";
import moment from "moment";
import PromoCode from '../../promo-code/PromoCode';

function CaseOne({ details, discountRoles, getPromoValue, getPromoId }) {

  const [priceAfterPromo, setPriceAfterPromo] = useState('');
  const [price, setPrice] = useState(Math.floor(details?.price));

  const getPrice = (value) => {
    setPriceAfterPromo(value);
  };

  useEffect(()=>{
    const applayRoles = () => {
      if(discountRoles && discountRoles !== ''){
        if(discountRoles?.price === 'Free'){
          setPrice(discountRoles?.price)
        }else{
          setPrice(Math.floor(discountRoles?.price))
        }
      }
    }
    applayRoles()
  },[])

  return (
    <>
      <div className="circle_yellow">
        <svg xmlns="http://www.w3.org/2000/svg" width="106" height="149" viewBox="0 0 106 149" fill="none">
          <path d="M170.904 82.3539C171.688 95.3526 167.866 106.023 162.673 116.403C162.183 117.47 161.497 118.44 161.203 119.507C159.145 126.782 153.853 131.633 148.071 135.901C140.918 141.139 132.882 144.146 124.063 145.892C115.145 147.638 106.228 148.996 97.1143 149.093C87.0209 149.093 77.3195 147.444 67.814 144.34C62.5223 142.594 57.3286 140.848 52.037 139.199C44.8834 136.968 39.1017 132.409 33.516 127.849C23.5206 119.701 14.2112 110.776 8.82148 98.8448C6.07764 92.8305 4.31375 86.2341 2.74584 79.8318C0.491969 71.4893 -0.389979 62.9528 0.0999923 54.3194C0.687958 43.7458 4.60773 34.9183 12.5453 27.837C23.0307 18.4275 34.594 10.473 47.8232 5.42876C63.5023 -0.488562 79.7693 -1.55562 96.2324 2.13058C99.2702 2.80961 102.21 3.48865 105.248 4.07068C114.557 5.81678 122.691 9.988 129.942 15.7113C140.722 24.0538 150.325 33.6573 158.557 44.4249C162.085 48.9841 164.828 54.1254 166.788 59.7517C169.532 67.4151 171.492 75.2725 170.904 82.3539ZM79.0834 135.513C84.4731 134.931 89.8627 134.64 95.2524 133.767C116.713 129.983 134.156 119.216 148.365 103.113C149.051 102.24 149.737 101.076 149.835 100.009C150.619 93.8005 150.423 87.5922 148.365 81.5778C143.662 67.9001 136.508 55.4834 128.668 43.4548C127.297 41.3207 125.533 39.0896 123.475 37.6345C115.831 32.4932 107.502 28.71 98.6822 25.7998C88.9808 22.5987 78.9854 21.5316 68.892 21.0466C60.7584 20.7556 52.9189 21.4346 46.1573 26.3819C42.6295 29.001 38.7097 31.1351 35.3779 33.8513C28.5183 39.5746 22.5407 46.0739 19.8948 54.9984C17.837 61.9828 18.0329 69.1612 19.1109 76.1456C20.7768 87.0101 24.6966 97.0987 29.4003 106.993C32.2421 112.814 35.9659 118.149 40.9636 122.126C52.037 130.953 64.5802 135.998 79.0834 135.513ZM64.3842 136.289C64.2862 136.677 64.1882 136.968 64.0903 137.356C67.912 138.326 71.6358 139.296 75.4576 140.169C83.7871 141.915 92.2146 142.982 100.74 141.915C105.934 141.236 111.03 139.878 116.125 138.52C126.905 135.513 135.528 129.207 141.996 120.283C144.544 116.791 146.307 112.814 147.091 108.448C134.058 120.477 119.555 129.789 102.504 134.737C104.66 134.737 106.62 134.252 108.58 133.864C110.442 133.476 112.205 133.185 114.067 132.797C97.8983 139.199 81.1413 138.617 64.3842 136.289ZM84.865 4.65271C107.992 11.4431 125.631 25.7999 143.172 40.1566C137.488 30.1651 130.628 21.2406 121.123 14.6442C113.675 9.50297 105.836 5.52576 96.8203 4.26469C93.0966 3.77967 89.3728 3.29464 84.865 4.65271ZM168.944 88.1742C169.924 71.8773 166.2 57.8116 156.891 45.4919C151.599 38.5075 145.034 32.2992 138.958 25.8969C136.606 23.4717 133.862 21.5316 131.314 19.3005C137.39 27.2549 143.564 34.9183 148.071 43.7458C150.031 47.529 152.481 50.8272 155.225 54.0284C161.007 60.5277 165.22 67.9001 167.082 76.5336C167.866 80.1228 168.258 83.712 168.944 88.1742ZM6.7636 89.1442C7.93953 85.5551 8.91948 82.4509 9.80143 79.2497C9.89942 78.7647 9.80143 78.0857 9.50744 77.6006C7.05759 73.0414 6.56761 67.9001 5.88165 62.8558C5.48968 59.6547 5.58767 56.2595 6.07764 52.9613C7.35157 44.2308 12.0553 37.0525 17.151 30.0681C18.7189 27.934 20.1888 25.7028 21.7567 23.4717C21.4627 23.2777 21.2668 23.0837 20.9728 22.7927C18.6209 24.7328 16.269 26.5759 14.0152 28.613C8.72349 33.5603 4.41174 39.2836 2.94183 46.559C0.00199812 60.9157 2.45185 74.8845 6.7636 89.1442ZM48.7052 23.2777C43.9034 23.0837 39.3957 23.3747 36.2599 27.3519C35.8679 27.934 35.0839 28.225 34.594 28.71C28.4203 33.8513 22.9327 39.3806 19.3069 46.559C16.857 51.5062 14.3092 56.6475 14.3092 62.1768C14.3092 69.3552 15.0931 76.6306 15.8771 83.809C16.367 88.9502 19.2089 93.0245 22.6387 96.8077C21.9527 93.5095 21.0708 90.3083 19.9928 87.2041C16.955 78.2797 16.0731 69.0642 17.053 59.7517C17.445 56.3565 18.6209 52.9613 20.0908 49.8571C24.4026 40.8357 31.9481 34.5303 39.9837 28.807C42.7275 26.7699 45.7653 25.1208 48.7052 23.2777ZM75.0656 6.3018C80.3573 7.75688 85.453 8.92094 90.4507 10.667C101.524 14.4502 110.736 21.5316 120.437 27.6429C129.648 33.4633 137.096 41.3207 143.956 49.7601C145.817 51.9913 148.071 54.0284 150.717 56.6475C150.619 55.2894 150.619 54.9014 150.521 54.5134C149.443 49.8571 146.209 46.559 142.878 43.5518C136.116 37.5375 129.256 31.7172 122.103 26.0909C112.205 18.3304 101.328 12.1221 89.2748 7.85389C86.139 6.78683 82.8072 5.91378 79.5733 5.42876C78.1034 5.23475 76.5355 6.01079 75.0656 6.3018ZM153.951 56.5505C155.225 60.8187 155.715 64.5049 157.283 67.7061C160.027 73.6234 160.909 79.8317 161.105 86.3311C161.203 92.3454 162.966 98.0687 164.142 104.859C168.552 92.1514 166.886 67.5121 153.951 56.5505ZM115.929 30.1651C103.288 16.6814 81.6312 13.7712 67.0301 18.9125C74.9676 20.0765 83.4931 20.6586 91.7246 22.5987C100.054 24.4418 107.992 27.6429 115.929 30.1651ZM113.773 143.855C114.949 143.758 115.537 143.855 116.125 143.758C126.611 142.206 135.92 137.841 144.74 132.215C148.267 129.983 151.305 126.976 154.343 123.969C155.617 122.708 156.891 120.962 156.695 118.537C143.27 128.916 128.374 135.513 113.773 143.855ZM80.4553 14.8383C79.4753 14.5472 78.4954 14.1592 77.6135 14.0622C72.5178 13.7712 67.4221 13.5772 62.3264 13.1892C54.8788 12.6071 49.9791 17.2634 44.4914 20.6586C44.5894 21.0466 44.6874 21.3376 44.8834 21.7256C56.6427 19.3975 68.402 17.1664 80.4553 14.8383ZM160.517 98.3597L159.341 98.0687C155.127 109.709 148.659 119.798 138.86 127.655C145.719 124.26 152.187 120.38 157.283 114.754C158.263 113.687 159.243 112.134 159.439 110.679C160.027 106.702 160.223 102.531 160.517 98.3597ZM28.0284 19.3005C31.6541 17.7484 35.1819 16.1963 38.8077 14.7413C40.5716 14.0622 42.4335 13.7712 44.1974 12.9952C50.665 10.279 57.2307 8.0479 64.3842 7.56287C66.5401 7.36886 68.794 6.78683 71.2438 4.65271C54.3888 4.4587 39.8857 8.24191 28.0284 19.3005ZM152.579 93.3155C155.617 87.7862 156.205 83.4209 154.245 79.3467C150.325 71.1983 145.132 63.6319 139.546 56.4535C144.838 68.3851 151.599 79.8317 152.579 93.3155ZM13.5252 42.5818C6.17564 50.8272 5.68567 67.0271 11.1733 74.4965C11.9573 63.8259 12.7413 53.6403 13.5252 42.5818ZM14.2112 87.6892C15.4851 99.8148 20.4828 110.291 27.4404 119.992C29.2043 122.417 33.712 124.745 36.5539 124.648C26.3625 113.784 18.1309 101.949 14.2112 87.6892ZM61.6404 10.9581C73.8897 12.4131 84.963 13.7712 96.5264 15.2263C87.4129 9.988 78.0054 8.0479 68.01 8.72693C66.1481 8.92094 64.2862 9.988 61.6404 10.9581ZM34.202 26.8669C33.908 26.6729 33.712 26.4789 33.418 26.2849C31.9481 26.8669 30.4782 27.4489 29.0083 28.031C24.8925 29.6801 21.6587 32.2022 19.9928 36.3734C18.0329 41.3207 16.1711 46.268 14.3092 51.3122C14.3092 51.4092 14.6031 51.6032 15.0931 51.9913C18.9149 41.5147 25.7745 33.5603 34.202 26.8669ZM133.96 44.4249C141.31 55.1924 148.071 65.184 154.833 75.1755C150.717 63.4379 145.523 52.3793 133.96 44.4249ZM11.3693 81.9659C8.23352 86.7191 8.62549 90.8903 9.89942 95.1586C11.6633 101.076 14.7991 106.314 18.4249 111.261C18.7189 111.746 19.4049 111.94 19.8948 112.328C15.1911 102.919 12.0553 93.2185 11.3693 81.9659ZM147.091 115.336C147.385 115.53 147.777 115.724 148.071 115.918C150.227 112.037 152.775 108.254 154.539 104.18C156.205 100.397 157.185 96.2256 158.361 92.1514C158.753 90.6963 159.243 88.8532 157.283 87.4952C153.853 97.0017 150.521 106.12 147.091 115.336ZM51.253 13.8682C41.2576 14.6442 34.888 19.8825 28.0284 25.8969C35.9659 24.2478 39.8857 22.2107 51.253 13.8682ZM20.2868 31.6202L28.9103 22.4047C28.7143 22.2107 28.5183 22.0166 28.2243 21.8226C24.9905 24.5388 20.7768 26.4789 20.2868 31.6202ZM83.5911 2.03357H71.6358C75.5556 3.48865 79.4754 4.4587 83.5911 2.03357ZM47.3332 134.931C47.5292 134.64 47.6272 134.446 47.8232 134.155C45.5693 132.215 43.6094 129.692 39.0037 129.886C42.2375 131.924 44.7854 133.476 47.3332 134.931ZM109.07 142.885C108.972 142.594 108.874 142.303 108.776 142.012C105.346 142.691 101.916 143.37 98.5842 143.952C98.6822 144.243 98.6822 144.534 98.7802 144.825C102.21 144.243 105.64 143.564 109.07 142.885ZM24.7945 104.859C24.5006 105.15 24.3046 105.344 24.0106 105.635C26.1665 108.448 27.5384 111.843 31.1642 113.59C29.0083 110.679 26.8524 107.769 24.7945 104.859ZM130.04 39.0896L130.726 38.2165C129.06 36.8584 127.493 35.5004 125.827 34.1423C125.533 34.4333 125.337 34.8213 125.043 35.1124C126.709 36.3734 128.374 37.7315 130.04 39.0896ZM57.6226 11.0551C57.5246 10.764 57.4266 10.57 57.3286 10.279C56.1527 10.667 54.9768 11.1521 53.8009 11.5401C53.8988 11.8311 53.9968 12.0251 54.0948 12.3161C55.2708 11.9281 56.4467 11.4431 57.6226 11.0551ZM128.374 17.8454C128.473 17.6514 128.668 17.3604 128.766 17.1664C128.179 16.7784 127.689 16.4873 127.101 16.0993C127.003 16.1963 126.905 16.2933 126.905 16.4873C127.395 16.9724 127.885 17.3604 128.374 17.8454Z" fill="#D0DF00"/>
        </svg>
      </div>
      <div className="p-5 bg_white col-md-8 col-12">
        <Paragraph className="paragraph_black light py-3">
          {details?.title}
        </Paragraph>
        <ul className="p-0" style={{
          listStyle: 'none'
        }}>
          <li className="summary_item d-flex align-items-center mb-4">
            <Calunder />
            <Paragraph className="mb-0 mx-2">{moment(details?.date).format("dddd, MMM. D, YYYY")}</Paragraph>
          </li>
          <li className="summary_item d-flex align-items-center mb-4">
            <Alarm />
            <Paragraph className="mb-0 mx-2">{details?.duration} Hours</Paragraph>
          </li>
          <li className="summary_item d-flex align-items-center mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
            <path d="M22.668 13.332C24.8771 13.332 26.668 11.5412 26.668 9.33203C26.668 7.12289 24.8771 5.33203 22.668 5.33203C20.4588 5.33203 18.668 7.12289 18.668 9.33203C18.668 11.5412 20.4588 13.332 22.668 13.332Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9.33398 26.6641C11.5431 26.6641 13.334 24.8732 13.334 22.6641C13.334 20.4549 11.5431 18.6641 9.33398 18.6641C7.12485 18.6641 5.33398 20.4549 5.33398 22.6641C5.33398 24.8732 7.12485 26.6641 9.33398 26.6641Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M18.6673 18.6654H26.6673V25.332C26.6673 25.6857 26.5268 26.0248 26.2768 26.2748C26.0267 26.5249 25.6876 26.6654 25.334 26.6654H20.0007C19.647 26.6654 19.3079 26.5249 19.0578 26.2748C18.8078 26.0248 18.6673 25.6857 18.6673 25.332V18.6654ZM5.33398 5.33203H13.334V11.9987C13.334 12.3523 13.1935 12.6915 12.9435 12.9415C12.6934 13.1916 12.3543 13.332 12.0007 13.332H6.66732C6.3137 13.332 5.97456 13.1916 5.72451 12.9415C5.47446 12.6915 5.33398 12.3523 5.33398 11.9987V5.33203Z" stroke="#BDBDBD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
            <Paragraph className="mb-0 mx-2">{details?.level}</Paragraph>
          </li>
          <li className="mb-4">
            {(discountRoles && discountRoles !== '') ? (
              <>
              <div className="d-flex">
                <Payment />
                <Paragraph className="summary_item mb-0 mx-2">
                {price}
                </Paragraph>
              </div>
                <Paragraph className="mb-0 ms-5">
                {discountRoles?.desc}
                </Paragraph>
              </>

            ) : 
            (
              <div className="d-flex">
                <Payment />
                <Paragraph className={`summary_item mb-0 mx-2 ${priceAfterPromo !== '' ? 'promoApplided' : ''}`}>
                  {price} EGP 
                </Paragraph>
              </div>
            )}
      
          </li>
          <li className="mb-0">
              <PromoCode 
                price={details?.price} 
                getPrice={getPrice}
                getPromoId={getPromoId} 
                getPromoValue={getPromoValue}
              />
            </li>
              <div className="my-32" style={{
                borderBottom: '1px solid black'
              }}></div>
            <li className="price-promo">
              <div className="d-flex justify-content-between align-items-center">
                <p>Total Price:</p>
                <p>{priceAfterPromo ? priceAfterPromo : price} EGP</p>
              </div>
            </li>
        </ul>
      </div>
    </>
  );
}

export default CaseOne;
