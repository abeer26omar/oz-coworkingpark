import { useEffect, useState, useContext } from "react";
import Paragraph from '../UI/Paragraph';
import Slider from "react-slick";
import Media from '../Media/Media';
import img from '../../assets/images/image 12.png';
import { getInstructorsList } from '../../apis/OzKnowledge';
import { AuthContext } from '../../apis/context/AuthTokenContext';
import * as DOMPurify from 'dompurify';

const PopularInstructor = ({details}) => {

    const [instractors, setInstractors] = useState([]);
    const [currentSlide, setCurrentSlide] = useState(0);

    const handleSlideChange = (slideIndex) => {
        setCurrentSlide(slideIndex);
    };

    const settings = {
        dots: true,
        infinite: false,
        speed: 300,
        slidesToShow: 1,
        cssEase: "linear",
        arrows: false,
        autoplay: false,
        autoplaySpeed: 3000,
        lazyLoad: true,
        beforeChange: (_, nextSlide) => handleSlideChange(nextSlide),
        responsive: [
            {
                breakpoint: 425,
                settings: {
                    dots: false
                }
            }
        ]
    }

    return (
      <>
        <section className="popularInstructor border-of-section">
          <div className="head-content-sec">
            <Paragraph className="head_feature">
              Our Best Instructor
            </Paragraph>
          </div>
          <div
            className="border-of-section"
            style={{
              borderBottom: "none",
            }}
          >
            <div className="container-fluid">
              <div className="row">
                <div className="col-lg-8 col-md-7 col-12 pb-4 border-right">
                  <Slider {...settings}>
                    {details?.map((item, index) => {
                      return (
                        <div className="img_block" key={item.index}>
                          <Media
                            type="img"
                            src={item.image}
                            className="image-box"
                            alt={item.name}
                            style={{
                              height: '512px',
                              objectFit: 'cover'
                            }}
                          />
                        </div>
                      );
                    })}
                  </Slider>
                </div>

                <div className="col-lg-4 col-md-5 col-12 my-auto pe-0 position-relative">
                  <div className="box-content p-lg-4 p-3">
                    {details?.length > 0 && (
                      <>
                        <Paragraph className="paragraph_black">
                          {details[currentSlide].name}
                        </Paragraph>
                        <Paragraph className="courses_jobTitle">
                          {details[currentSlide].category?.title}
                        </Paragraph>
                        <div className='description_black sideSection_desc py-2' dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(details[currentSlide]?.description) }}></div>
                      </>
                    )}
                  </div>
                  <div className="yellow_circle_instractors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="127" height="189" viewBox="0 0 127 189" fill="none">
                      <g opacity="0.7">
                        <path d="M185.886 102.487C186.739 116.61 182.583 128.204 176.935 139.481C176.402 140.641 175.656 141.695 175.336 142.854C173.098 150.759 167.344 156.029 161.056 160.666C153.277 166.357 144.539 169.625 134.948 171.522C125.25 173.419 115.553 174.895 105.642 175C94.6662 175 84.1162 173.208 73.7794 169.836C68.0249 167.938 62.3769 166.041 56.6224 164.249C48.8431 161.825 42.5557 156.872 36.4815 151.918C25.6119 143.065 15.4881 133.368 9.62704 120.404C6.64321 113.87 4.72503 106.703 3.01999 99.7465C0.568983 90.6823 -0.390105 81.4074 0.142722 72.027C0.782114 60.5387 5.04473 50.9476 13.6765 43.2536C25.079 33.0301 37.6537 24.3875 52.0401 18.9069C69.0905 12.4777 86.7804 11.3183 104.683 15.3234C107.987 16.0612 111.184 16.7989 114.487 17.4313C124.611 19.3285 133.456 23.8605 141.342 30.079C153.064 39.1431 163.507 49.5774 172.459 61.2765C176.295 66.2302 179.279 71.8162 181.41 77.9293C184.394 86.2556 186.526 94.7928 185.886 102.487ZM86.0344 160.244C91.8955 159.612 97.7566 159.296 103.618 158.347C126.956 154.237 145.924 142.538 161.376 125.042C162.122 124.093 162.868 122.828 162.975 121.669C163.827 114.924 163.614 108.178 161.376 101.644C156.261 86.7826 148.482 73.2918 139.957 60.2225C138.465 57.9038 136.546 55.4797 134.309 53.8987C125.996 48.3127 116.938 44.2022 107.348 41.0403C96.7975 37.5622 85.9279 36.4028 74.9516 35.8758C66.1067 35.5596 57.5815 36.2974 50.2285 41.6727C46.3921 44.5184 42.1295 46.8371 38.5063 49.7882C31.0467 56.0067 24.5462 63.0683 21.6689 72.7648C19.4311 80.3534 19.6442 88.1528 20.8164 95.7414C22.628 107.546 26.8906 118.507 32.0058 129.258C35.0962 135.581 39.1457 141.378 44.5805 145.7C56.6224 155.291 70.2627 160.771 86.0344 160.244ZM70.0496 161.088C69.943 161.509 69.8365 161.825 69.7299 162.247C73.886 163.301 77.9355 164.355 82.0915 165.303C91.1496 167.201 100.314 168.36 109.585 167.201C115.233 166.463 120.775 164.987 126.316 163.512C138.038 160.244 147.416 153.394 154.449 143.697C157.22 139.903 159.138 135.581 159.991 130.839C145.818 143.908 130.046 154.026 111.504 159.401C113.848 159.401 115.979 158.874 118.111 158.453C120.135 158.031 122.054 157.715 124.078 157.293C106.495 164.249 88.2723 163.617 70.0496 161.088ZM92.3218 18.0637C117.471 25.4415 136.653 41.0403 155.728 56.639C149.547 45.7831 142.088 36.0866 131.751 28.9196C123.652 23.3336 115.127 19.0123 105.323 17.6421C101.273 17.1151 97.2238 16.5881 92.3218 18.0637ZM183.755 108.811C184.821 91.1039 180.771 75.8213 170.647 62.4359C164.893 54.8473 157.753 48.1019 151.146 41.1457C148.588 38.5107 145.604 36.4028 142.834 33.9787C149.441 42.6212 156.154 50.9476 161.056 60.5387C163.188 64.6492 165.852 68.2327 168.836 71.7108C175.123 78.7724 179.705 86.7826 181.73 96.163C182.583 100.063 183.009 103.962 183.755 108.811ZM7.38917 109.865C8.66795 105.965 9.73361 102.592 10.6927 99.1141C10.7993 98.5871 10.6927 97.8493 10.373 97.3223C7.70886 92.3687 7.17604 86.7826 6.43008 81.302C6.00382 77.8239 6.11038 74.135 6.64321 70.5515C8.02856 61.0657 13.1437 53.2663 18.6851 45.6777C20.3901 43.359 21.9886 40.9349 23.6937 38.5107C23.374 38.3 23.1608 38.0892 22.8411 37.773C20.2836 39.8809 17.726 41.8835 15.275 44.0968C9.52048 49.472 4.8316 55.6905 3.23312 63.5953C0.0361562 79.194 2.70029 94.3712 7.38917 109.865ZM52.9992 38.3C47.7775 38.0892 42.8754 38.4053 39.4654 42.7266C39.0391 43.359 38.1866 43.6752 37.6537 44.2022C30.9401 49.7882 24.9725 55.7959 21.0295 63.5953C18.3654 68.9705 15.5947 74.5566 15.5947 80.5642C15.5947 88.3636 16.4472 96.2684 17.2997 104.068C17.8326 109.654 20.923 114.08 24.6528 118.191C23.9068 114.607 22.9477 111.129 21.7755 107.757C18.472 98.0601 17.5129 88.0474 18.5785 77.9293C19.0048 74.2404 20.2836 70.5515 21.8821 67.1788C26.5709 57.3768 34.7765 50.526 43.5148 44.3076C46.4987 42.0942 49.8022 40.3025 52.9992 38.3ZM81.6652 19.8555C87.4198 21.4364 92.9612 22.7012 98.396 24.5983C110.438 28.7088 120.455 36.4028 131.005 43.0428C141.022 49.3666 149.121 57.9038 156.581 67.0734C158.605 69.4975 161.056 71.7108 163.934 74.5566C163.827 73.081 163.827 72.6594 163.721 72.2378C162.548 67.1788 159.032 63.5953 155.409 60.3279C148.055 53.7933 140.596 47.4695 132.817 41.3565C122.054 32.9247 110.225 26.1793 97.1172 21.5418C93.7071 20.3824 90.0839 19.4339 86.5673 18.9069C84.9688 18.6961 83.2637 19.5393 81.6652 19.8555ZM167.45 74.4512C168.836 79.0886 169.369 83.0937 171.074 86.5718C174.057 93.0011 175.017 99.7465 175.23 106.808C175.336 113.343 177.254 119.561 178.533 126.939C183.329 113.132 181.517 86.361 167.45 74.4512ZM126.103 45.7831C112.356 31.1329 88.8051 27.971 72.9269 33.5571C81.5587 34.8218 90.8299 35.4542 99.7814 37.5622C108.839 39.5647 117.471 43.0428 126.103 45.7831ZM123.759 169.309C125.037 169.203 125.677 169.309 126.316 169.203C137.719 167.517 147.842 162.774 157.433 156.661C161.27 154.237 164.573 150.969 167.877 147.702C169.262 146.332 170.647 144.435 170.434 141.8C155.835 153.077 139.637 160.244 123.759 169.309ZM87.5263 29.1304C86.4607 28.8142 85.395 28.3926 84.4359 28.2872C78.8945 27.971 73.3531 27.7602 67.8117 27.3387C59.7128 26.7063 54.3845 31.7653 48.4168 35.4542C48.5234 35.8758 48.63 36.192 48.8431 36.6136C61.631 34.0841 74.4188 31.6599 87.5263 29.1304ZM174.59 119.877L173.311 119.561C168.729 132.209 161.696 143.17 151.039 151.707C158.499 148.018 165.532 143.802 171.074 137.689C172.139 136.53 173.205 134.844 173.418 133.263C174.057 128.941 174.271 124.409 174.59 119.877ZM30.5139 33.9787C34.4568 32.2923 38.2931 30.606 42.236 29.025C44.1542 28.2872 46.179 27.971 48.0971 27.1279C55.1305 24.1767 62.2703 21.7526 70.0496 21.2256C72.3941 21.0148 74.8451 20.3824 77.5092 18.0637C59.1799 17.8529 43.4083 21.9634 30.5139 33.9787ZM165.958 114.397C169.262 108.389 169.901 103.646 167.77 99.2195C163.507 90.3661 157.859 82.1451 151.785 74.3458C157.54 87.3096 164.893 99.7465 165.958 114.397ZM14.7422 59.274C6.74978 68.2327 6.21695 85.8341 12.1846 93.9496C13.0371 82.3559 13.8897 71.2892 14.7422 59.274ZM15.4881 108.284C16.8735 121.458 22.3083 132.841 29.8745 143.381C31.7926 146.016 36.6946 148.545 39.785 148.44C28.7022 136.635 19.7508 123.777 15.4881 108.284ZM67.0658 24.9145C80.3865 26.4955 92.4284 27.971 105.003 29.552C95.0925 23.8605 84.8622 21.7526 73.9925 22.4904C71.9678 22.7012 69.9431 23.8605 67.0658 24.9145ZM37.2275 42.1996C36.9078 41.9888 36.6946 41.7781 36.375 41.5673C34.7765 42.1996 33.178 42.832 31.5795 43.4644C27.1038 45.2562 23.5871 47.9965 21.7755 52.5286C19.6442 57.9038 17.6194 63.2791 15.5947 68.7597C15.5947 68.8651 15.9144 69.0759 16.4472 69.4975C20.6033 58.1146 28.0629 49.472 37.2275 42.1996ZM145.711 61.2765C153.703 72.9756 161.056 83.8315 168.409 94.6874C163.934 81.9344 158.286 69.9191 145.711 61.2765ZM12.3977 102.065C8.98765 107.23 9.41391 111.762 10.7993 116.399C12.7174 122.828 16.1275 128.52 20.0704 133.895C20.3901 134.422 21.1361 134.633 21.6689 135.054C16.5538 124.831 13.1437 114.291 12.3977 102.065ZM159.991 138.322C160.311 138.533 160.737 138.743 161.056 138.954C163.401 134.738 166.172 130.628 168.09 126.201C169.901 122.091 170.967 117.559 172.246 113.132C172.672 111.551 173.205 109.548 171.074 108.073C167.344 118.402 163.721 128.309 159.991 138.322ZM55.7699 28.0764C44.9002 28.9196 37.9734 34.6111 30.5139 41.1457C39.1457 39.3539 43.4083 37.1406 55.7699 28.0764ZM22.0952 47.3641L31.4729 37.3514C31.2598 37.1406 31.0467 36.9298 30.727 36.719C27.2103 39.6701 22.628 41.7781 22.0952 47.3641ZM90.9364 15.218H77.9355C82.1981 16.7989 86.4607 17.8529 90.9364 15.218ZM51.5072 159.612C51.7204 159.296 51.8269 159.085 52.0401 158.769C49.5891 156.661 47.4578 153.921 42.4492 154.131C45.9658 156.345 48.7365 158.031 51.5072 159.612ZM118.643 168.255C118.537 167.938 118.43 167.622 118.324 167.306C114.594 168.044 110.864 168.782 107.241 169.414C107.348 169.73 107.348 170.046 107.454 170.363C111.184 169.73 114.914 168.992 118.643 168.255ZM26.9972 126.939C26.6775 127.255 26.4644 127.466 26.1447 127.782C28.4891 130.839 29.981 134.528 33.924 136.425C31.5795 133.263 29.2351 130.101 26.9972 126.939ZM141.448 55.4797L142.194 54.5311C140.383 53.0555 138.678 51.58 136.866 50.1044C136.546 50.4206 136.333 50.8422 136.014 51.1584C137.825 52.5286 139.637 54.0041 141.448 55.4797ZM62.6966 25.0199C62.59 24.7037 62.4835 24.4929 62.3769 24.1767C61.0981 24.5983 59.8193 25.1253 58.5406 25.5469C58.6471 25.8631 58.7537 26.0739 58.8603 26.3901C60.139 25.9685 61.4178 25.4415 62.6966 25.0199ZM139.637 32.3977C139.743 32.1869 139.957 31.8707 140.063 31.6599C139.424 31.2383 138.891 30.9222 138.251 30.5006C138.145 30.606 138.038 30.7114 138.038 30.9222C138.571 31.4491 139.104 31.8707 139.637 32.3977Z" fill="#D0DF00"/>
                      </g>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </>
    );
};
export default PopularInstructor;